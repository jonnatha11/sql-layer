#test the SUBSTR and SUBSTRING functions
---
- Include: all-types-schema.yaml
---
- Statement: INSERT INTO all_types(varchar_field, integer_field, double_field) VALUES ('quadratically', 3, 5.0), ('Sakila', -3, -5.0);
--- # test SUBSTRING in SELECT clause, with 3 args
- Statement: SELECT SUBSTR(varchar_field, 5, LENGTH(varchar_field) - 4) from all_types;
- output: [['ratically'], ['la']]
--- # test with 3 args
- Statement: SELECT SUBSTR('quadratically', integer_field, 6) from all_types WHERE integer_field  = 3;
- output: [['adrati']]
--- # test SUBSTR with 3 args
- Statement: SELECT SUBSTR('quadratically', integer_field, double_field + 1) FROM all_types WHERE integer_field = 3;
- output: [['adrati']]
--- # test with null
- Statement: SELECT SUBSTR(null, 2) from all_types;
- output: [[null], [null]]
---
- Statement: SELECT SUBSTR(null, 1, 3) from all_types;
- output: [[null], [null]]
--- # test with null as second arg
- Statement: SELECT SUBSTR('abc', null) from all_types;
- output: [[null], [null]]
--- # test with null as third arg
- Statement: SELECT SUBSTR('xyz', 1, null) from all_types;
- output: [[null], [null]]
--- # test with null
- Statement: SELECT SUBSTR(null, null, null) from all_types;
- output: [[null], [null]]
--- # test with params
- Statement: SELECT SUBSTR(?, 2, 3) from all_types;
- params: [['abcd']]
- output: [['bcd'], ['bcd']]
--- # test with params
- Statement: SELECT SUBSTR('xyzt', ?, 3) from all_types;
- params: [[2]]
- output: [['yzt'], ['yzt']]
--- # test index out of bound
- Statement: SELECT SUBSTR('ABC', 4 );
- output: [['']]
--- # test empty string
- Statement: SELECT SUBSTR('', 2, 0) from all_types;
- output: [[''], ['']]
--- # test SUBSTR in WHERE clause
- Statement: SELECT double_field from all_types WHERE SUBSTR(varchar_field, integer_field, LENGTH(varchar_field) - integer_field + 1) = 'ila';
- output: [[-5.0]]
--- 
- Statement: SELECT SUBSTR('Sakila', 1, 6) from all_types;
- output: [['Sakila'], ['Sakila']]
--- # test with empty string
- Statement: SELECT SUBSTR('', 1, 1) from all_types;
- output: [[''], ['']]
--- # test wrong arity: excessive arguments
- Statement: SELECT SUBSTR('ABC', 1, 2, 3) from all_types;
- error: [42000]
--- # test SUBSTR called with 2 args
- Statement: SELECT SUBSTR('abcd', 1);
- output: [['abcd']]
--- # test with null literal
- Statement: SELECT SUBSTR('abcd', null);
- output: [[null]]
---
- Statement: SELECT SUBSTRING('abcd', 1, null);
- output: [[null]]
--- # test aliases
- Statement: SELECT SUBSTRING('abcd', 3);
- output: [['cd']]
---
- Statement: SELECT MID('abcd', 3);
- output: [['cd']]
...
