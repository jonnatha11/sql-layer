#
# bug 1194969 - ALTER table with group index fails 
#
---
- CreateTable: test.customers ( 
    customer_id int not null primary key generated by default as identity, 
    customer_name varchar(255) not null, 
    customer_title varchar(5), 
    primary_payment_code char(4) not null default 'CHRG',  
    payment_status char(1) not null default 'C',  
    comment varchar(255));
---
- Statement: create index customer_i1 on customers (customer_name);  
---
- CreateTable: test.addresses (address_id int not null, customer_id int not null, state varchar(2) not null, zip_code int not null, phone varchar (15), address_type char(1) not null default 'N', primary key (address_id), grouping foreign key (customer_id) references customers);
---  
- CreateTable: test.orders (order_id int not null generated by default as identity, 
    customer_id int not null, 
    order_date date not null, 
    order_status char (1) not null default 'N', 
    order_priority varchar(15) not null default 'Standard', 
    ship_date date, ship_priority varchar(15), 
    ship_method varchar(15), 
    ship_parts int, 
    update_time timestamp default current_timestamp, 
    instructions long varchar, 
    primary key (order_id), 
    grouping foreign key (customer_id) REFERENCES customers);
---    
- Statement: create index orders_i1 on orders (order_status, order_date);
---
- Statement: create index orders_i2 on orders (order_status, ship_date);
---
- CreateTable: test.items (
    item_id int not null,
    order_id int not null,
    book_id int not null,
    quantity int not null,
    unit_price decimal(5,3) not null,
    discount float, 
    tax float,
    item_status char(1) not null default 'N',
    shipment_part int,
    color varchar(20),
    last_updated timestamp null default null,
    primary key(item_id),
    grouping foreign key (order_id) references orders (order_id));
---
- Statement: create index items_i1 on items (item_status, shipment_part);
---
- Statement: create index items_i2 on items (book_id, color);
---
- Statement: create index items_i3 on items (order_id, last_updated);
---
- Statement: INSERT INTO customers VALUES
    (1,'Mr or Ms Dude1','#1','CASH','C','Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ultrices justo in sapien ullamcorper eu mattis massa pretium.Suspendisse purus nunc, semper id convallis vitae, mattis at libero. Curabitur facilisis consequat pharetra. Nulla a massa'),
    (2,'Mr or Ms Dude2','#2','CASH','C','Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ultrices justo in sapien ullamcorper eu mattis massa pretium.Suspendisse purus nunc, semper id convallis vitae, mattis at libero. Curabitur facilisis consequat pharetra. Nulla a massa')
---
- Statement: INSERT INTO orders VALUES
    (1,2,'1995-01-02','C','Standard','1996-01-02','Prior 1','GROUND',1,'2011-10-09 08:07:06','Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ultrices justo in sapien ullamcorper eu mattis massa pretium.Suspendisse purus nunc, semper id convallis vitae, mattis at libero. Curabitur facilisis consequat pharetra. Nulla a massa'),
    (2,1,'1995-02-01','C','Standard','1996-02-01','Prior 2','GROUND',1,'2011-10-09 08:07:06','Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ultrices justo in sapien ullamcorper eu mattis massa pretium.Suspendisse purus nunc, semper id convallis vitae, mattis at libero. Curabitur facilisis consequat pharetra. Nulla a massa'),
    (3,2,'1995-03-02','C','Standard','1996-03-02','Prior 3','GROUND',1,'2011-10-09 08:07:06','Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ultrices justo in sapien ullamcorper eu mattis massa pretium.Suspendisse purus nunc, semper id convallis vitae, mattis at libero. Curabitur facilisis consequat pharetra. Nulla a massa'),
    (4,1,'1995-04-01','C','Standard','1996-04-01','Prior 4','GROUND',1,'2011-10-09 08:07:06','Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ultrices justo in sapien ullamcorper eu mattis massa pretium.Suspendisse purus nunc, semper id convallis vitae, mattis at libero. Curabitur facilisis consequat pharetra. Nulla a massa')
---
- Statement: INSERT INTO items VALUES
    (1,2,1,10,12.100,0.7,0.25,'P',12,'Black','1995-02-01 08:07:06'),
    (2,3,2,1,13.200,0.7,0.25,'Q',13,'Black','1995-03-02 08:07:06'),
    (3,4,3,1,14.300,0.7,0.25,'R',14,'Black','1995-04-03 08:07:06'),
    (4,1,4,1,11.400,0.7,0.25,'O',11,'Black','1995-01-04 08:07:06'),
    (5,2,5,1,12.5000,0.7,0.25,'P',12,'Black','1995-02-05 08:07:06'),
    (6,3,6,1,13.600,0.7,0.25,'Q',13,'Black','1995-03-06 08:07:06'),
    (7,4,7,1,14.700,0.7,0.25,'R',14,'Black','1995-04-07 08:07:06'),
    (8,1,8,1,11.800,0.7,0.25,'O',11,'Black','1995-01-08 08:07:06')
---
- Statement: CREATE INDEX gdx_ci ON test.customers (customers.customer_name, items.color, items.tax) USING LEFT JOIN
---
- Statement: UPDATE items SET discount = item_id * 0.4
---
- Statement: "ALTER TABLE items ALTER COLUMN discount SET DATA TYPE INTEGER"
---
- Statement: SELECT * FROM items
- output: [
  [1,2,1,10,'12.100',0,0.25,'P',12,'Black',!re '1995-02-01 08:07:06(\.0)?'],
  [2,3,2,1 ,'13.200',1,0.25,'Q',13,'Black',!re '1995-03-02 08:07:06(\.0)?'],
  [3,4,3,1 ,'14.300',1,0.25,'R',14,'Black',!re '1995-04-03 08:07:06(\.0)?'],
  [4,1,4,1 ,'11.400',2,0.25,'O',11,'Black',!re '1995-01-04 08:07:06(\.0)?'],
  [5,2,5,1 ,'12.500',2,0.25,'P',12,'Black',!re '1995-02-05 08:07:06(\.0)?'],
  [6,3,6,1 ,'13.600',2,0.25,'Q',13,'Black',!re '1995-03-06 08:07:06(\.0)?'],
  [7,4,7,1 ,'14.700',3,0.25,'R',14,'Black',!re '1995-04-07 08:07:06(\.0)?'],
  [8,1,8,1 ,'11.800',3,0.25,'O',11,'Black',!re '1995-01-08 08:07:06(\.0)?']]
- row_count: 8
- output_types: [INTEGER,INTEGER,INTEGER,INTEGER,DECIMAL,INTEGER,DOUBLE,VARCHAR,INTEGER,VARCHAR,DATETIME]
---
- Statement: ALTER TABLE items ALTER COLUMN unit_price SET DATA TYPE VARCHAR(40)
--- 
- Statement: SELECT * FROM items
- output: [
  [1,2,1,10,'12.100',0,0.25,'P',12,'Black',!re '1995-02-01 08:07:06(\.0)?'],
  [2,3,2,1 ,'13.200',1,0.25,'Q',13,'Black',!re '1995-03-02 08:07:06(\.0)?'],
  [3,4,3,1 ,'14.300',1,0.25,'R',14,'Black',!re '1995-04-03 08:07:06(\.0)?'],
  [4,1,4,1 ,'11.400',2,0.25,'O',11,'Black',!re '1995-01-04 08:07:06(\.0)?'],
  [5,2,5,1 ,'12.500',2,0.25,'P',12,'Black',!re '1995-02-05 08:07:06(\.0)?'],
  [6,3,6,1 ,'13.600',2,0.25,'Q',13,'Black',!re '1995-03-06 08:07:06(\.0)?'],
  [7,4,7,1 ,'14.700',3,0.25,'R',14,'Black',!re '1995-04-07 08:07:06(\.0)?'],
  [8,1,8,1 ,'11.800',3,0.25,'O',11,'Black',!re '1995-01-08 08:07:06(\.0)?']]
- row_count: 8
- output_types: [INTEGER,INTEGER,INTEGER,INTEGER,VARCHAR,INTEGER,DOUBLE,VARCHAR,INTEGER,VARCHAR,DATETIME]
...