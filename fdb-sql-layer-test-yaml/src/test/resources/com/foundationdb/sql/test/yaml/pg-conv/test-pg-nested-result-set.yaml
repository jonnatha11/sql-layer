# Modifies connection state
---
- Properties: random-context
- suppressed: true

# Cannot force child ordering for ** queries
---
- Properties: random-cost
- suppressed: true

---
- Include: all-schema.yaml
---
- Statement: SET SESSION CHARACTERISTICS AS TRANSACTION READ ONLY; 
---
- Statement: SELECT * FROM customers LEFT JOIN orders ON orders.cid = customers.cid LEFT JOIN items ON items.oid = orders.oid LEFT JOIN addresses ON addresses.cid = customers.cid ORDER BY customers.name, orders.order_date DESC, items.sku;
- output_already_ordered: [[2,Jones,201,2,'2011-03-03',2011,201,9876,1,201,2,NY,New York],[2,Jones,202,2,'2011-02-28',2021,202,1234,99,201,2,NY,New York],[1,Smith,102,1,'2011-03-02',null,null,null,null,101,1,MA,Boston],[1,Smith,101,1,'2011-03-01',1011,101,1234,100,101,1,MA,Boston],[1,Smith,101,1,'2011-03-01',1012,101,4567,50,101,1,MA,Boston]]
---
- Statement: SELECT customers.*, (SELECT orders.*, (SELECT items.* FROM items WHERE items.oid = orders.oid ORDER BY sku) AS items FROM orders WHERE orders.cid = customers.cid ORDER BY order_date DESC) AS orders, (SELECT addresses.* FROM addresses WHERE addresses.cid = customers.cid ORDER BY state) AS addresses FROM customers ORDER BY name;
- error: [5000M]
---
- Statement: SET OutputFormat TO 'json';
---
- Statement: SELECT * FROM customers LEFT JOIN orders ON orders.cid = customers.cid LEFT JOIN items ON items.oid = orders.oid LEFT JOIN addresses ON addresses.cid = customers.cid ORDER BY customers.name, orders.order_date DESC, items.sku;
- output_already_ordered: [['{"cid":2,"name":"Jones","oid":201,"cid":2,"order_date":"2011-03-03","iid":2011,"oid":201,"sku":"9876","quan":1,"aid":201,"cid":2,"state":"NY","city":"New York"}'],['{"cid":2,"name":"Jones","oid":202,"cid":2,"order_date":"2011-02-28","iid":2021,"oid":202,"sku":"1234","quan":99,"aid":201,"cid":2,"state":"NY","city":"New York"}'],['{"cid":1,"name":"Smith","oid":102,"cid":1,"order_date":"2011-03-02","iid":null,"oid":null,"sku":null,"quan":null,"aid":101,"cid":1,"state":"MA","city":"Boston"}'],['{"cid":1,"name":"Smith","oid":101,"cid":1,"order_date":"2011-03-01","iid":1011,"oid":101,"sku":"1234","quan":100,"aid":101,"cid":1,"state":"MA","city":"Boston"}'],['{"cid":1,"name":"Smith","oid":101,"cid":1,"order_date":"2011-03-01","iid":1012,"oid":101,"sku":"4567","quan":50,"aid":101,"cid":1,"state":"MA","city":"Boston"}']]
---
- Statement: SELECT customers.*, (SELECT orders.*, (SELECT items.* FROM items WHERE items.oid = orders.oid ORDER BY sku) AS items FROM orders WHERE orders.cid = customers.cid ORDER BY order_date DESC) AS orders, (SELECT addresses.* FROM addresses WHERE addresses.cid = customers.cid ORDER BY state) AS addresses FROM customers ORDER BY name;
- output_already_ordered: [['{"cid":2,"name":"Jones","orders":[{"oid":201,"cid":2,"order_date":"2011-03-03","items":[{"iid":2011,"oid":201,"sku":"9876","quan":1}]},{"oid":202,"cid":2,"order_date":"2011-02-28","items":[{"iid":2021,"oid":202,"sku":"1234","quan":99}]}],"addresses":[{"aid":201,"cid":2,"state":"NY","city":"New York"}]}'],['{"cid":1,"name":"Smith","orders":[{"oid":102,"cid":1,"order_date":"2011-03-02","items":[]},{"oid":101,"cid":1,"order_date":"2011-03-01","items":[{"iid":1011,"oid":101,"sku":"1234","quan":100},{"iid":1012,"oid":101,"sku":"4567","quan":50}]}],"addresses":[{"aid":101,"cid":1,"state":"MA","city":"Boston"}]}']]
---
- Statement: SELECT ** FROM customers ORDER BY name
- output: [['{"cid":2,"name":"Jones","addresses":[{"aid":201,"cid":2,"state":"NY","city":"New York"}],"orders":[{"oid":201,"cid":2,"order_date":"2011-03-03","items":[{"iid":2011,"oid":201,"sku":"9876","quan":1}]},{"oid":202,"cid":2,"order_date":"2011-02-28","items":[{"iid":2021,"oid":202,"sku":"1234","quan":99}]}]}'],['{"cid":1,"name":"Smith","addresses":[{"aid":101,"cid":1,"state":"MA","city":"Boston"}],"orders":[{"oid":101,"cid":1,"order_date":"2011-03-01","items":[{"iid":1011,"oid":101,"sku":"1234","quan":100},{"iid":1012,"oid":101,"sku":"4567","quan":50}]},{"oid":102,"cid":1,"order_date":"2011-03-02","items":[]}]}']]
---
- Statement: SELECT ** FROM customers WHERE cid = 1;
- output: [['{"cid":1,"name":"Smith","addresses":[{"aid":101,"cid":1,"state":"MA","city":"Boston"}],"orders":[{"oid":101,"cid":1,"order_date":"2011-03-01","items":[{"iid":1011,"oid":101,"sku":"1234","quan":100},{"iid":1012,"oid":101,"sku":"4567","quan":50}]},{"oid":102,"cid":1,"order_date":"2011-03-02","items":[]}]}']]
---
- Statement: SET OutputFormat TO 'json_with_meta_data';
---
- Statement: SELECT ** FROM customers WHERE FALSE;
- output: [['[{"name":"cid","oid":23,"type":"INTEGER NOT NULL"},{"name":"name","oid":1043,"type":"VARCHAR(32) CHARACTER SET UTF8 COLLATE UCS_BINARY NOT NULL","length":32},{"name":"addresses","columns":[{"name":"aid","oid":23,"type":"INTEGER NOT NULL"},{"name":"cid","oid":23,"type":"INTEGER NOT NULL"},{"name":"state","oid":1042,"type":"CHAR(2) CHARACTER SET UTF8 COLLATE UCS_BINARY","length":2},{"name":"city","oid":1043,"type":"VARCHAR(100) CHARACTER SET UTF8 COLLATE UCS_BINARY","length":100}]},{"name":"orders","columns":[{"name":"oid","oid":23,"type":"INTEGER NOT NULL"},{"name":"cid","oid":23,"type":"INTEGER NOT NULL"},{"name":"order_date","oid":1082,"type":"DATE NOT NULL"},{"name":"items","columns":[{"name":"iid","oid":23,"type":"INTEGER NOT NULL"},{"name":"oid","oid":23,"type":"INTEGER NOT NULL"},{"name":"sku","oid":1043,"type":"VARCHAR(32) CHARACTER SET UTF8 COLLATE UCS_BINARY NOT NULL","length":32},{"name":"quan","oid":23,"type":"INTEGER NOT NULL"}]}]}]']]
---
- Statement: SET OutputFormat TO DEFAULT;
---
- Statement: SET SESSION CHARACTERISTICS AS TRANSACTION READ WRITE; 
...
