# Modifies connection state
---
- Properties: random-context
- suppressed: true

## Test JSON OutputFormat
---
- Properties: sys-mysql
- suppressed: true
---
- Include: all-types-schema.yaml
---
- Statement: INSERT INTO all_types(bigint_field, date_field, decimal_field, double_field, time_field, timestamp_field, varchar_field)
             VALUES (1234, '2010-01-01', 2, 3.14159, '13:59:59', '1999-12-31 23:59:59', NULL)
---
- CreateTable: t (id int NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, name varchar(32) NOT NULL) 
---
- Statement: "INSERT INTO t VALUES(1, 'abc'),(2, 'abc''xyz'),(3, 'abc\"xyz'),(5, '\u2603')"
---
- Statement: "INSERT INTO t VALUES(4, 'abc\nxyz')"
---
- Statement: SELECT bigint_field, date_field, decimal_field, double_field, time_field, timestamp_field, varchar_field FROM all_types
- output: [[1234, '2010-01-01', 2, 3.14159, '13:59:59', !re '1999-12-31 23:59:59([.]0)?', null]]
---
- Statement: SELECT * FROM t
- output: [[1, 'abc'],[2, "abc'xyz"],[3, 'abc"xyz'],[4, "abc\nxyz"],[5, !unicode "\u2603"]]
---
- CreateTable: t3 (id GUID NOT NULL)
---
- Statement: "INSERT INTO t3 VALUES('11e150ae-9a27-1111-8d50-b13c026cab14'), ('22e150ae-9a27-44d1-2222-b13c026cab14')"
---
- Statement: SELECT * FROM t3
- output: [[11e150ae-9a27-1111-8d50-b13c026cab14],[22e150ae-9a27-44d1-2222-b13c026cab14]]
---
- Statement: SET OutputFormat TO 'json';
---
- Statement: SELECT bigint_field, date_field, decimal_field, double_field, time_field, timestamp_field, varchar_field FROM all_types
- output: [['{"bigint_field":1234,"date_field":"2010-01-01","decimal_field":"2","double_field":3.14159,"time_field":"13:59:59","timestamp_field":"1999-12-31 23:59:59","varchar_field":null}']]
---
- Statement: SELECT * FROM t
- output: [['{"id":1,"name":"abc"}'],["{\"id\":2,\"name\":\"abc'xyz\"}"],["{\"id\":3,\"name\":\"abc\\\"xyz\"}"],["{\"id\":4,\"name\":\"abc\\nxyz\"}"],["{\"id\":5,\"name\":\"\\u2603\"}"]]
---
- CreateTable: t2(id int PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY, n int);
---
- Statement: INSERT INTO t2(n) VALUES(5),(6) RETURNING id;
- output: [['{"id":1}'],['{"id":2}']]
---
- Statement: SELECT * FROM t3
- output: [['{"id":"11e150ae-9a27-1111-8d50-b13c026cab14"}'],['{"id":"22e150ae-9a27-44d1-2222-b13c026cab14"}']]
---
- Statement: SET OutputFormat TO 'json_with_meta_data';
---
- Statement: SELECT * FROM t order by id
- output_already_ordered: [['[{"name":"id","oid":23,"type":"INTEGER NOT NULL"},{"name":"name","oid":1043,"type":"VARCHAR(32) CHARACTER SET UTF8 COLLATE UCS_BINARY NOT NULL","length":32}]'],['{"id":1,"name":"abc"}'],["{\"id\":2,\"name\":\"abc'xyz\"}"],["{\"id\":3,\"name\":\"abc\\\"xyz\"}"],["{\"id\":4,\"name\":\"abc\\nxyz\"}"],["{\"id\":5,\"name\":\"\\u2603\"}"]]
---
- Statement: INSERT INTO t2(n) VALUES(7),(8) RETURNING id;
- output_already_ordered: [['[{"name":"id","oid":23,"type":"INTEGER NOT NULL"}]'],['{"id":3}'],['{"id":4}']]
---
- Statement: SET OutputFormat TO DEFAULT;
...
